From 02a0f14b1c2d7542fc4919ad5440e354b45e5ab4 Mon Sep 17 00:00:00 2001
Message-Id: <02a0f14b1c2d7542fc4919ad5440e354b45e5ab4.1524081065.git.Jim.Somerville@windriver.com>
In-Reply-To: <8d084dcc717666af0283e4ddeefaba7e331d879a.1524081065.git.Jim.Somerville@windriver.com>
References: <8d084dcc717666af0283e4ddeefaba7e331d879a.1524081065.git.Jim.Somerville@windriver.com>
From: Alex Kozyrev <alex.kozyrev@windriver.com>
Date: Fri, 16 Mar 2018 15:58:37 -0400
Subject: [PATCH 38/39] restrict iSCSI kthreads to CPUs in cpu_kthread_mask

Do not allow them to run on other CPUs to prevent interference with VMs.

Signed-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>
Signed-off-by: Jim Somerville <Jim.Somerville@windriver.com>
---
 SPECS/kernel-rt.spec | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/SPECS/kernel-rt.spec b/SPECS/kernel-rt.spec
index 5d9b4bc..9dae160 100644
--- a/SPECS/kernel-rt.spec
+++ b/SPECS/kernel-rt.spec
@@ -429,6 +429,7 @@ Patch1031: KVM-x86-Fix-potential-preemption-when-get-the-curren.patch
 Patch1032: mqueue-fix-a-use-after-free-in-sys_mq_notify.patch
 # DRBD was choking on write same
 Patch1033: turn-off-write-same-in-smartqpi-driver.patch
+Patch1034: restrict-iSCSI-kthreads-to-CPUs-in-cpu_kthread_mask.patch
 
 BuildRoot: %{_tmppath}/kernel-%{KVERREL}-root
 
@@ -825,6 +826,7 @@ ApplyPatch dpt_i2o-fix-build-warning.patch
 ApplyPatch KVM-x86-Fix-potential-preemption-when-get-the-curren.patch
 ApplyPatch mqueue-fix-a-use-after-free-in-sys_mq_notify.patch
 ApplyPatch turn-off-write-same-in-smartqpi-driver.patch
+ApplyPatch restrict-iSCSI-kthreads-to-CPUs-in-cpu_kthread_mask.patch
 
 # move off upstream version mechanism
 if [ -e localversion-rt ]; then
-- 
1.8.3.1

