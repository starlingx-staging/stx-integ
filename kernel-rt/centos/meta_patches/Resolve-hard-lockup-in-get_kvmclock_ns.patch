From e59df4d0ef91fd9ab7545356627d97b671da098d Mon Sep 17 00:00:00 2001
Message-Id: <e59df4d0ef91fd9ab7545356627d97b671da098d.1524081065.git.Jim.Somerville@windriver.com>
In-Reply-To: <8d084dcc717666af0283e4ddeefaba7e331d879a.1524081065.git.Jim.Somerville@windriver.com>
References: <8d084dcc717666af0283e4ddeefaba7e331d879a.1524081065.git.Jim.Somerville@windriver.com>
From: Alex Kozyrev <alex.kozyrev@windriver.com>
Date: Thu, 16 Nov 2017 11:36:56 -0500
Subject: [PATCH 34/39] Resolve hard lockup in get_kvmclock_ns

Signed-off-by: Jim Somerville <Jim.Somerville@windriver.com>
---
 SPECS/kernel-rt.spec | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/SPECS/kernel-rt.spec b/SPECS/kernel-rt.spec
index 4706989..34774c1 100644
--- a/SPECS/kernel-rt.spec
+++ b/SPECS/kernel-rt.spec
@@ -424,6 +424,7 @@ Patch1028: timer-Minimize-nohz-off-overhead.patch
 # Fix compile warnings that break the build
 Patch1029: aic94xx-Skip-reading-user-settings-if-flash-is-not-f.patch
 Patch1030: dpt_i2o-fix-build-warning.patch
+Patch1031: KVM-x86-Fix-potential-preemption-when-get-the-curren.patch
 
 BuildRoot: %{_tmppath}/kernel-%{KVERREL}-root
 
@@ -817,6 +818,7 @@ ApplyPatch timer-Reduce-timer-migration-overhead-if-disabled.patch
 ApplyPatch timer-Minimize-nohz-off-overhead.patch
 ApplyPatch aic94xx-Skip-reading-user-settings-if-flash-is-not-f.patch
 ApplyPatch dpt_i2o-fix-build-warning.patch
+ApplyPatch KVM-x86-Fix-potential-preemption-when-get-the-curren.patch
 
 # move off upstream version mechanism
 if [ -e localversion-rt ]; then
-- 
1.8.3.1

