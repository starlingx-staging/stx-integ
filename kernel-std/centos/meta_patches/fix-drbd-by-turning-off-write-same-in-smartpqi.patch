From 12abdd52f85c120ace88513aec1b106d9fb28bee Mon Sep 17 00:00:00 2001
Message-Id: <12abdd52f85c120ace88513aec1b106d9fb28bee.1522099420.git.Jim.Somerville@windriver.com>
In-Reply-To: <37dfb62264baec527d56aaf20db887840bec1ea1.1522099415.git.Jim.Somerville@windriver.com>
References: <37dfb62264baec527d56aaf20db887840bec1ea1.1522099415.git.Jim.Somerville@windriver.com>
From: Jim Somerville <Jim.Somerville@windriver.com>
Date: Tue, 6 Mar 2018 12:58:10 -0500
Subject: [PATCH 31/32] fix drbd by turning off write same in smartpqi

Signed-off-by: Jim Somerville <Jim.Somerville@windriver.com>
---
 SPECS/kernel.spec | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/SPECS/kernel.spec b/SPECS/kernel.spec
index 139607f..b50d791 100644
--- a/SPECS/kernel.spec
+++ b/SPECS/kernel.spec
@@ -452,6 +452,8 @@ Patch40028: KVM-x86-remove-irq-disablement-around-KVM_SET_CLOCK-.patch
 Patch40029: KVM-x86-Fix-potential-preemption-when-get-the-curren.patch
 # CVE-2017-11176: kernel: Use-after-free in sys_mq_notify()
 Patch40030: mqueue-fix-a-use-after-free-in-sys_mq_notify.patch
+# DRBD was choking on write same
+Patch40031: turn-off-write-same-in-smartqpi-driver.patch
 
 BuildRoot: %{_tmppath}/kernel-%{KVRA}-root
 
@@ -805,6 +807,7 @@ ApplyOptionalPatch dpt_i2o-fix-build-warning.patch
 ApplyOptionalPatch KVM-x86-remove-irq-disablement-around-KVM_SET_CLOCK-.patch
 ApplyOptionalPatch KVM-x86-Fix-potential-preemption-when-get-the-curren.patch
 ApplyOptionalPatch mqueue-fix-a-use-after-free-in-sys_mq_notify.patch
+ApplyOptionalPatch turn-off-write-same-in-smartqpi-driver.patch
 
 # Any further pre-build tree manipulations happen here.
 
-- 
1.8.3.1

